<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Epidemic Curves • epivis</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/paper/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Epidemic Curves">
<meta property="og:description" content="epivis">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">epivis</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.0.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/epicurves.html">Epidemic Curves</a>
    </li>
    <li>
      <a href="../articles/pyramids.html">Age/Sex Pyramids</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/epicentre-msf/epivis/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="epicurves_files/accessible-code-block-0.0.1/empty-anchor.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Epidemic Curves</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/epicentre-msf/epivis/blob/master/vignettes/epicurves.Rmd"><code>vignettes/epicurves.Rmd</code></a></small>
      <div class="hidden name"><code>epicurves.Rmd</code></div>

    </div>

    
    
<p>The <code>plot_epicurve</code> function can be used for plotting incidence over time, commonly referred to as an epidemic curve or epicurve. It is designed to work with un-aggregated data, i.e. patient level linelist data.</p>
<p>We’ll use a simulated ebola outbreak dataset from the <a href="http://www.repidemicsconsortium.org/outbreaks/"><code>{outbreaks}</code></a> package for our examples.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org">dplyr</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org">ggplot2</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/epicentre-msf/epivis">epivis</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/reconhub/outbreaks">outbreaks</a></span><span class="op">)</span> 

<span class="co"># set a ggplot2 theme of your preference</span>
<span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme_get.html">theme_set</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html">theme_light</a></span><span class="op">(</span>base_size <span class="op">=</span> <span class="fl">12</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">df_ebola</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://tibble.tidyverse.org/reference/as_tibble.html">as_tibble</a></span><span class="op">(</span><span class="fu">outbreaks</span><span class="fu">::</span><span class="va"><a href="https://rdrr.io/pkg/outbreaks/man/ebola_sim.html">ebola_sim_clean</a></span><span class="op">$</span><span class="va">linelist</span><span class="op">)</span>

<span class="fu"><a href="https://pillar.r-lib.org/reference/glimpse.html">glimpse</a></span><span class="op">(</span><span class="va">df_ebola</span><span class="op">)</span>
<span class="co">#&gt; Rows: 5,829</span>
<span class="co">#&gt; Columns: 11</span>
<span class="co">#&gt; $ case_id                 &lt;chr&gt; "d1fafd", "53371b", "f5c3d8", "6c286a", "0f58c…</span>
<span class="co">#&gt; $ generation              &lt;int&gt; 0, 1, 1, 2, 2, 0, 3, 3, 2, 3, 4, 3, 4, 2, 4, 4…</span>
<span class="co">#&gt; $ date_of_infection       &lt;date&gt; NA, 2014-04-09, 2014-04-18, NA, 2014-04-22, 2…</span>
<span class="co">#&gt; $ date_of_onset           &lt;date&gt; 2014-04-07, 2014-04-15, 2014-04-21, 2014-04-2…</span>
<span class="co">#&gt; $ date_of_hospitalisation &lt;date&gt; 2014-04-17, 2014-04-20, 2014-04-25, 2014-04-2…</span>
<span class="co">#&gt; $ date_of_outcome         &lt;date&gt; 2014-04-19, NA, 2014-04-30, 2014-05-07, 2014-…</span>
<span class="co">#&gt; $ outcome                 &lt;fct&gt; NA, NA, Recover, Death, Recover, NA, Recover, …</span>
<span class="co">#&gt; $ gender                  &lt;fct&gt; f, m, f, f, f, f, f, f, m, m, f, f, f, f, f, m…</span>
<span class="co">#&gt; $ hospital                &lt;fct&gt; Military Hospital, Connaught Hospital, other, …</span>
<span class="co">#&gt; $ lon                     &lt;dbl&gt; -13.21799, -13.21491, -13.22804, -13.23112, -1…</span>
<span class="co">#&gt; $ lat                     &lt;dbl&gt; 8.473514, 8.464927, 8.483356, 8.464776, 8.4521…</span></code></pre></div>
<p>You can plot a simple curve by providing the dataset and the bare column name containing the dates you want to plot:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/plot_epicurve.html">plot_epicurve</a></span><span class="op">(</span>
  <span class="va">df_ebola</span>, 
  date_col <span class="op">=</span> <span class="va">date_of_onset</span>
<span class="op">)</span></code></pre></div>
<p><img src="epicurves_files/figure-html/unnamed-chunk-2-1.png" width="768"></p>
<div id="working-with-dates-and-weeks" class="section level3">
<h3 class="hasAnchor">
<a href="#working-with-dates-and-weeks" class="anchor"></a>Working with dates and weeks</h3>
<p>Commonly incidence is plotted by week, not day. Here we have daily data but we can ask <code>plot_epicurve</code> to re-calculate incidence by week instead by setting <code>floor_date_week = TRUE</code>. You can choose the first day of the week with <code>week_start</code> (defaults to 1 (Monday)). Finally we can set date axis labels to the week number rather than date.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/plot_epicurve.html">plot_epicurve</a></span><span class="op">(</span>
  <span class="va">df_ebola</span>, 
  date_col <span class="op">=</span> <span class="va">date_of_onset</span>, 
  floor_date_week <span class="op">=</span> <span class="cn">TRUE</span>, 
  week_start <span class="op">=</span> <span class="fl">1</span>,
  label_weeks <span class="op">=</span> <span class="cn">TRUE</span>,
  date_lab <span class="op">=</span> <span class="st">"Week of onset"</span>, 
  y_lab <span class="op">=</span> <span class="st">"Incidence"</span>
<span class="op">)</span></code></pre></div>
<p><img src="epicurves_files/figure-html/unnamed-chunk-3-1.png" width="768"></p>
<p>A secondary date axis can be added on top with default ggplot labels via <code>sec_date_axis = TRUE</code>. When this is done, week labels will be reduced to only the week number, as year information should be displayed in the top labels. You can control the number of date labels on the bottom axis with the <code>date_breaks</code> argument.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/plot_epicurve.html">plot_epicurve</a></span><span class="op">(</span>
  <span class="va">df_ebola</span>, 
  date_col <span class="op">=</span> <span class="va">date_of_onset</span>, 
  floor_date_week <span class="op">=</span> <span class="cn">TRUE</span>, 
  label_weeks <span class="op">=</span> <span class="cn">TRUE</span>,
  date_breaks <span class="op">=</span> <span class="st">"3 weeks"</span>,
  sec_date_axis <span class="op">=</span> <span class="cn">TRUE</span>,
  date_lab <span class="op">=</span> <span class="st">"Week of onset"</span>, 
  y_lab <span class="op">=</span> <span class="st">"Incidence"</span>
<span class="op">)</span></code></pre></div>
<p><img src="epicurves_files/figure-html/unnamed-chunk-4-1.png" width="768"></p>
<p>If you want to display more week labels and avoid overlapping, you can use the <code>dodge_x_labs</code> helper function:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/plot_epicurve.html">plot_epicurve</a></span><span class="op">(</span>
  <span class="va">df_ebola</span>, 
  date_col <span class="op">=</span> <span class="va">date_of_onset</span>, 
  floor_date_week <span class="op">=</span> <span class="cn">TRUE</span>,
  label_weeks <span class="op">=</span> <span class="cn">TRUE</span>,
  sec_date_axis <span class="op">=</span> <span class="cn">TRUE</span>,
  date_breaks <span class="op">=</span> <span class="st">"1 week"</span>, 
  date_lab <span class="op">=</span> <span class="st">"Week of onset"</span>, 
  y_lab <span class="op">=</span> <span class="st">"Incidence"</span>
<span class="op">)</span> <span class="op">+</span>
  <span class="fu">dodge_x_labs</span><span class="op">(</span><span class="op">)</span></code></pre></div>
<p><img src="epicurves_files/figure-html/unnamed-chunk-5-1.png" width="768"></p>
<p>Sometimes during epidemics a week or two may pass with no cases reported. By default this would not appear on the epicurve as there is no data for the latest week. However you may want to explicitly show this on the graphic to effectively communicate that the data is up-to-date and there are 0 cases in the latest week(s). To do this add a <code>date_max</code> argument. This will force the date axis to extend to that point:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/plot_epicurve.html">plot_epicurve</a></span><span class="op">(</span>
  <span class="va">df_ebola</span>, 
  date_col <span class="op">=</span> <span class="va">date_of_onset</span>, 
  floor_date_week <span class="op">=</span> <span class="cn">TRUE</span>,
  label_weeks <span class="op">=</span> <span class="cn">TRUE</span>,
  sec_date_axis <span class="op">=</span> <span class="cn">TRUE</span>,
  date_max <span class="op">=</span> <span class="st">"2015-06-01"</span>, <span class="co"># extend axis to June 2015</span>
  date_breaks <span class="op">=</span> <span class="st">"1 week"</span>, 
  date_lab <span class="op">=</span> <span class="st">"Week of onset"</span>, 
  y_lab <span class="op">=</span> <span class="st">"Incidence"</span>
<span class="op">)</span> <span class="op">+</span>
  <span class="fu">dodge_x_labs</span><span class="op">(</span><span class="op">)</span></code></pre></div>
<p><img src="epicurves_files/figure-html/unnamed-chunk-6-1.png" width="768"></p>
</div>
<div id="grouping-data" class="section level3">
<h3 class="hasAnchor">
<a href="#grouping-data" class="anchor"></a>Grouping Data</h3>
<p>You may want to visualise a third variable by filling the columns with varying colours. We can do this by adding a <code>group_col</code> argument.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/plot_epicurve.html">plot_epicurve</a></span><span class="op">(</span>
  <span class="va">df_ebola</span>, 
  date_col <span class="op">=</span> <span class="va">date_of_onset</span>, 
  group_col <span class="op">=</span> <span class="va">outcome</span>,
  floor_date_week <span class="op">=</span> <span class="cn">TRUE</span>,  
  label_weeks <span class="op">=</span> <span class="cn">TRUE</span>,
  sec_date_axis <span class="op">=</span> <span class="cn">FALSE</span>,
  date_lab <span class="op">=</span> <span class="st">"Week of onset"</span>, 
  y_lab <span class="op">=</span> <span class="st">"Incidence"</span>,
  group_lab <span class="op">=</span> <span class="st">"Outcome"</span>
<span class="op">)</span></code></pre></div>
<p><img src="epicurves_files/figure-html/unnamed-chunk-7-1.png" width="768"></p>
<p>By default, <code>NA</code>s will be plotted with a grey colour. You can change this with the <code>group_na_colour</code> argument. Alternatively, you may want to recode <code>NA</code>s in your data to a more meaningful label. Because the <code>outcome</code> column in this dataset is a factor, we can recode <code>NA</code>s with <code><a href="https://forcats.tidyverse.org/reference/fct_explicit_na.html">forcats::fct_explicit_na</a></code>.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">df_ebola</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>outcome <span class="op">=</span> <span class="fu">forcats</span><span class="fu">::</span><span class="fu"><a href="https://forcats.tidyverse.org/reference/fct_explicit_na.html">fct_explicit_na</a></span><span class="op">(</span><span class="va">outcome</span>, <span class="st">"Unknown"</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="../reference/plot_epicurve.html">plot_epicurve</a></span><span class="op">(</span>
    date_col <span class="op">=</span> <span class="va">date_of_onset</span>, 
    group_col <span class="op">=</span> <span class="va">outcome</span>,
    floor_date_week <span class="op">=</span> <span class="cn">TRUE</span>,  
    label_weeks <span class="op">=</span> <span class="cn">TRUE</span>,
    sec_date_axis <span class="op">=</span> <span class="cn">FALSE</span>,
    date_lab <span class="op">=</span> <span class="st">"Week of onset"</span>, 
    y_lab <span class="op">=</span> <span class="st">"Incidence"</span>,
    group_lab <span class="op">=</span> <span class="st">"Outcome"</span>
  <span class="op">)</span></code></pre></div>
<p><img src="epicurves_files/figure-html/unnamed-chunk-8-1.png" width="768"></p>
<p>Note: here we ‘pipe’ the modified dataset into the first argument of the <code>plot_epicurve</code> function.</p>
</div>
<div id="adding-proportion-lines" class="section level3">
<h3 class="hasAnchor">
<a href="#adding-proportion-lines" class="anchor"></a>Adding proportion lines</h3>
<p>It can be useful to visualise a proportion or ratio over time on top of the epicurve, case fatality ratio being a good example. This can be done with <code>plot_epicurve</code> by providing a proportion column along with the numerator and denominator values. To plot the CFR here we would use the <code>outcome</code> column with a numerator of <code>"Death"</code> and a denominator of <code><a href="https://rdrr.io/r/base/c.html">c("Death", "Recover")</a></code> (ignoring unknown outcomes in the calculation):</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">df_ebola</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>outcome <span class="op">=</span> <span class="fu">forcats</span><span class="fu">::</span><span class="fu"><a href="https://forcats.tidyverse.org/reference/fct_explicit_na.html">fct_explicit_na</a></span><span class="op">(</span><span class="va">outcome</span>, <span class="st">"Unknown"</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="../reference/plot_epicurve.html">plot_epicurve</a></span><span class="op">(</span>
    date_col <span class="op">=</span> <span class="va">date_of_onset</span>, 
    group_col <span class="op">=</span> <span class="va">outcome</span>,
    prop_col <span class="op">=</span> <span class="va">outcome</span>,
    prop_numer <span class="op">=</span> <span class="st">"Death"</span>,
    prop_denom <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Death"</span>, <span class="st">"Recover"</span><span class="op">)</span>,
    floor_date_week <span class="op">=</span> <span class="cn">TRUE</span>,  
    label_weeks <span class="op">=</span> <span class="cn">TRUE</span>,
    sec_date_axis <span class="op">=</span> <span class="cn">FALSE</span>,
    date_lab <span class="op">=</span> <span class="st">"Week of onset"</span>, 
    y_lab <span class="op">=</span> <span class="st">"Incidence"</span>,
    group_lab <span class="op">=</span> <span class="st">"Outcome"</span>,
    prop_lab <span class="op">=</span> <span class="st">"CFR"</span>
  <span class="op">)</span></code></pre></div>
<p><img src="epicurves_files/figure-html/unnamed-chunk-9-1.png" width="768"></p>
<p>See also: <code>prop_line_colour</code> and <code>prop_line_size</code> argument to modify the colour and line thickness, respectively.</p>
</div>
<div id="faceting" class="section level3">
<h3 class="hasAnchor">
<a href="#faceting" class="anchor"></a>Faceting</h3>
<p>Facets can be used to split the epicurves by a categorical variable, often a location. In this case we can facet by <code>hospital</code> simply by adding a <code>facet_col = hospital</code> argument. We also set the facet columns to 2 and reduce the CFR line width due to smaller plot sizes:</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">df_ebola</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>outcome <span class="op">=</span> <span class="fu">forcats</span><span class="fu">::</span><span class="fu"><a href="https://forcats.tidyverse.org/reference/fct_explicit_na.html">fct_explicit_na</a></span><span class="op">(</span><span class="va">outcome</span>, <span class="st">"Unknown"</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="../reference/plot_epicurve.html">plot_epicurve</a></span><span class="op">(</span>
    date_col <span class="op">=</span> <span class="va">date_of_onset</span>, 
    group_col <span class="op">=</span> <span class="va">outcome</span>,
    facet_col <span class="op">=</span> <span class="va">hospital</span>,
    facet_ncol <span class="op">=</span> <span class="fl">2</span>,
    facet_labs <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labellers.html">label_wrap_gen</a></span><span class="op">(</span>width <span class="op">=</span> <span class="fl">30</span><span class="op">)</span>,
    prop_col <span class="op">=</span> <span class="va">outcome</span>,
    prop_numer <span class="op">=</span> <span class="st">"Death"</span>,
    prop_denom <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Death"</span>, <span class="st">"Recover"</span><span class="op">)</span>,
    prop_line_size <span class="op">=</span> <span class="fl">.5</span>,
    floor_date_week <span class="op">=</span> <span class="cn">TRUE</span>,  
    label_weeks <span class="op">=</span> <span class="cn">TRUE</span>,
    date_breaks <span class="op">=</span> <span class="st">"4 weeks"</span>,
    sec_date_axis <span class="op">=</span> <span class="cn">TRUE</span>,
    date_lab <span class="op">=</span> <span class="st">"Week of onset"</span>, 
    y_lab <span class="op">=</span> <span class="st">"Incidence"</span>,
    group_lab <span class="op">=</span> <span class="st">"Outcome"</span>,
    prop_lab <span class="op">=</span> <span class="st">"CFR"</span>
  <span class="op">)</span></code></pre></div>
<p><img src="epicurves_files/figure-html/unnamed-chunk-10-1.png" width="768"></p>
</div>
<div id="theming" class="section level3">
<h3 class="hasAnchor">
<a href="#theming" class="anchor"></a>Theming</h3>
<p>Although <code>plot_epicurve</code> has built-in theme defaults, because the function returns a ggplot object, you can easily reset any default by adding your own themes, palettes etc to the object:</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="http://github.com/hrbrmstr/hrbrthemes">hrbrthemes</a></span><span class="op">)</span> <span class="co"># install.packages("hrbrthemes") for additional ggplot2 themes</span>
<span class="fu"><a href="https://rdrr.io/pkg/hrbrthemes/man/import_roboto_condensed.html">import_roboto_condensed</a></span><span class="op">(</span><span class="op">)</span> <span class="co"># import required font for theme below</span>

<span class="va">df_ebola</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>outcome <span class="op">=</span> <span class="fu">forcats</span><span class="fu">::</span><span class="fu"><a href="https://forcats.tidyverse.org/reference/fct_explicit_na.html">fct_explicit_na</a></span><span class="op">(</span><span class="va">outcome</span>, <span class="st">"Unknown"</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="../reference/plot_epicurve.html">plot_epicurve</a></span><span class="op">(</span>
    date_col <span class="op">=</span> <span class="va">date_of_onset</span>, 
    group_col <span class="op">=</span> <span class="va">outcome</span>,
    prop_col <span class="op">=</span> <span class="va">outcome</span>,
    prop_numer <span class="op">=</span> <span class="st">"Death"</span>,
    prop_denom <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Death"</span>, <span class="st">"Recover"</span><span class="op">)</span>,
    prop_line_colour <span class="op">=</span> <span class="st">"orange"</span>,
    prop_line_size <span class="op">=</span> <span class="fl">0.5</span>,
    floor_date_week <span class="op">=</span> <span class="cn">TRUE</span>, 
    label_weeks <span class="op">=</span> <span class="cn">TRUE</span>,
    sec_date_axis <span class="op">=</span> <span class="cn">FALSE</span>,
    date_lab <span class="op">=</span> <span class="st">"Week of onset"</span>, 
    y_lab <span class="op">=</span> <span class="st">"Incidence"</span>,
    group_lab <span class="op">=</span> <span class="st">"Outcome"</span>,
    prop_lab <span class="op">=</span> <span class="st">"CFR"</span>
  <span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_manual.html">scale_fill_manual</a></span><span class="op">(</span>values <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"#486090FF"</span>, <span class="st">"#6078A8FF"</span>, <span class="st">"#7890A8FF"</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> 
  <span class="fu">hrbrthemes</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/hrbrthemes/man/theme_ipsum_rc.html">theme_ft_rc</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> <span class="co"># requires Roboto Condensed font to be installed on your system</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html">theme</a></span><span class="op">(</span>
    panel.grid.major.x <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_blank</a></span><span class="op">(</span><span class="op">)</span>, 
    panel.grid.minor.x <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_blank</a></span><span class="op">(</span><span class="op">)</span>, 
    axis.title.y <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_text</a></span><span class="op">(</span>hjust <span class="op">=</span> <span class="fl">.5</span><span class="op">)</span>
  <span class="op">)</span></code></pre></div>
<p><img src="epicurves_files/figure-html/unnamed-chunk-11-1.png" width="768"></p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

      </div>

</div>



      <footer><div class="copyright">
  <p>Developed by <a href="https://github.com/paulc91">Paul Campbell</a>.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
