<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="epivis">
<title>Epidemic Curves • epivis</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.11/clipboard.min.js" integrity="sha512-7O5pXpc0oCRrxk8RUfDYFgn0nO1t+jLuIOQdOMRp4APB7uZ4vSjspzp5y6YDtDs4VzUSTbWzBFZ/LKJhnyFOKw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Epidemic Curves">
<meta property="og:description" content="epivis">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light" data-bs-theme="light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">epivis</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.0.9000</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/epicurves.html">Epidemic Curves</a>
    <a class="dropdown-item" href="../articles/pyramids.html">Age/Sex Pyramids</a>
  </div>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/epicentre-msf/epivis/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Epidemic Curves</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/epicentre-msf/epivis/blob/HEAD/vignettes/epicurves.Rmd" class="external-link"><code>vignettes/epicurves.Rmd</code></a></small>
      <div class="d-none name"><code>epicurves.Rmd</code></div>
    </div>

    
    
<p>The <code>plot_epicurve</code> function can be used for plotting
incidence over time, commonly referred to as an epidemic curve or
epicurve. It is designed to work with un-aggregated data, i.e. patient
level linelist data.</p>
<p>We’ll use a simulated ebola outbreak dataset from the <a href="http://www.repidemicsconsortium.org/outbreaks/" class="external-link"><code>{outbreaks}</code></a>
package for our examples.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/epicentre-msf/epivis" class="external-link">epivis</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/reconhub/outbreaks" class="external-link">outbreaks</a></span><span class="op">)</span> </span>
<span></span>
<span><span class="co"># set a ggplot2 theme of your preference</span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme_get.html" class="external-link">theme_set</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html" class="external-link">theme_light</a></span><span class="op">(</span>base_size <span class="op">=</span> <span class="fl">12</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">df_ebola</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://tibble.tidyverse.org/reference/as_tibble.html" class="external-link">as_tibble</a></span><span class="op">(</span><span class="fu">outbreaks</span><span class="fu">::</span><span class="va"><a href="https://rdrr.io/pkg/outbreaks/man/ebola_sim.html" class="external-link">ebola_sim_clean</a></span><span class="op">$</span><span class="va">linelist</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://pillar.r-lib.org/reference/glimpse.html" class="external-link">glimpse</a></span><span class="op">(</span><span class="va">df_ebola</span><span class="op">)</span></span>
<span><span class="co">#&gt; Rows: 5,829</span></span>
<span><span class="co">#&gt; Columns: 11</span></span>
<span><span class="co">#&gt; $ case_id                 <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "d1fafd", "53371b", "f5c3d8", "6c286a", "0f58c…</span></span>
<span><span class="co">#&gt; $ generation              <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> 0, 1, 1, 2, 2, 0, 3, 3, 2, 3, 4, 3, 4, 2, 4, 4…</span></span>
<span><span class="co">#&gt; $ date_of_infection       <span style="color: #949494; font-style: italic;">&lt;date&gt;</span> NA, 2014-04-09, 2014-04-18, NA, 2014-04-22, 2…</span></span>
<span><span class="co">#&gt; $ date_of_onset           <span style="color: #949494; font-style: italic;">&lt;date&gt;</span> 2014-04-07, 2014-04-15, 2014-04-21, 2014-04-2…</span></span>
<span><span class="co">#&gt; $ date_of_hospitalisation <span style="color: #949494; font-style: italic;">&lt;date&gt;</span> 2014-04-17, 2014-04-20, 2014-04-25, 2014-04-2…</span></span>
<span><span class="co">#&gt; $ date_of_outcome         <span style="color: #949494; font-style: italic;">&lt;date&gt;</span> 2014-04-19, NA, 2014-04-30, 2014-05-07, 2014-…</span></span>
<span><span class="co">#&gt; $ outcome                 <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span> NA, NA, Recover, Death, Recover, NA, Recover, …</span></span>
<span><span class="co">#&gt; $ gender                  <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span> f, m, f, f, f, f, f, f, m, m, f, f, f, f, f, m…</span></span>
<span><span class="co">#&gt; $ hospital                <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span> Military Hospital, Connaught Hospital, other, …</span></span>
<span><span class="co">#&gt; $ lon                     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> -13.21799, -13.21491, -13.22804, -13.23112, -1…</span></span>
<span><span class="co">#&gt; $ lat                     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 8.473514, 8.464927, 8.483356, 8.464776, 8.4521…</span></span></code></pre></div>
<p>You can plot a simple curve by providing the dataset and the bare
column name containing the dates you want to plot:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/plot_epicurve.html">plot_epicurve</a></span><span class="op">(</span></span>
<span>  <span class="va">df_ebola</span>, </span>
<span>  date_col <span class="op">=</span> <span class="va">date_of_onset</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p><img src="epicurves_files/figure-html/unnamed-chunk-2-1.png" width="768"></p>
<div class="section level3">
<h3 id="working-with-dates-and-weeks">Working with dates and weeks<a class="anchor" aria-label="anchor" href="#working-with-dates-and-weeks"></a>
</h3>
<p>Commonly incidence is plotted by week, not day. Here we have daily
data but we can ask <code>plot_epicurve</code> to re-calculate incidence
by week instead by setting <code>floor_date_week = TRUE</code>. You can
choose the first day of the week with <code>week_start</code> (defaults
to 1 (Monday)). Finally we can set date axis labels to the week number
rather than date.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/plot_epicurve.html">plot_epicurve</a></span><span class="op">(</span></span>
<span>  <span class="va">df_ebola</span>, </span>
<span>  date_col <span class="op">=</span> <span class="va">date_of_onset</span>, </span>
<span>  floor_date_week <span class="op">=</span> <span class="cn">TRUE</span>, </span>
<span>  week_start <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  label_weeks <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  date_lab <span class="op">=</span> <span class="st">"Week of onset"</span>, </span>
<span>  y_lab <span class="op">=</span> <span class="st">"Incidence"</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p><img src="epicurves_files/figure-html/unnamed-chunk-3-1.png" width="768"></p>
<p>A secondary date axis can be added on top with default ggplot labels
via <code>sec_date_axis = TRUE</code>. When this is done, week labels
will be reduced to only the week number, as year information will be
displayed in the top labels. You can control the number of date labels
on the bottom axis with the <code>date_breaks</code> argument.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/plot_epicurve.html">plot_epicurve</a></span><span class="op">(</span></span>
<span>  <span class="va">df_ebola</span>, </span>
<span>  date_col <span class="op">=</span> <span class="va">date_of_onset</span>, </span>
<span>  floor_date_week <span class="op">=</span> <span class="cn">TRUE</span>, </span>
<span>  label_weeks <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  date_breaks <span class="op">=</span> <span class="st">"3 weeks"</span>,</span>
<span>  sec_date_axis <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  date_lab <span class="op">=</span> <span class="st">"Week of onset"</span>, </span>
<span>  y_lab <span class="op">=</span> <span class="st">"Incidence"</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p><img src="epicurves_files/figure-html/unnamed-chunk-4-1.png" width="768"></p>
<p>If you want to display more week labels and avoid overlapping, you
can use the <code>dodge_x_labs</code> helper function:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/plot_epicurve.html">plot_epicurve</a></span><span class="op">(</span></span>
<span>  <span class="va">df_ebola</span>, </span>
<span>  date_col <span class="op">=</span> <span class="va">date_of_onset</span>, </span>
<span>  floor_date_week <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  label_weeks <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  sec_date_axis <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  date_breaks <span class="op">=</span> <span class="st">"1 week"</span>, </span>
<span>  date_lab <span class="op">=</span> <span class="st">"Week of onset"</span>, </span>
<span>  y_lab <span class="op">=</span> <span class="st">"Incidence"</span></span>
<span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="../reference/dodge_x_labs.html">dodge_x_labs</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p><img src="epicurves_files/figure-html/unnamed-chunk-5-1.png" width="768"></p>
<p>Sometimes during epidemics a week or two may pass with no cases
reported. By default this would not appear on the epicurve as there is
no data for the latest week. However you may want to explicitly show
this on the graphic to effectively communicate that the data is
up-to-date and there are 0 cases in the latest week(s). To do this add a
<code>date_max</code> argument. This will force the date axis to extend
to that point:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/plot_epicurve.html">plot_epicurve</a></span><span class="op">(</span></span>
<span>  <span class="va">df_ebola</span>, </span>
<span>  date_col <span class="op">=</span> <span class="va">date_of_onset</span>, </span>
<span>  floor_date_week <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  label_weeks <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  sec_date_axis <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  date_max <span class="op">=</span> <span class="st">"2015-06-01"</span>, <span class="co"># extend axis to June 2015</span></span>
<span>  date_breaks <span class="op">=</span> <span class="st">"1 week"</span>, </span>
<span>  date_lab <span class="op">=</span> <span class="st">"Week of onset"</span>, </span>
<span>  y_lab <span class="op">=</span> <span class="st">"Incidence"</span></span>
<span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="../reference/dodge_x_labs.html">dodge_x_labs</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p><img src="epicurves_files/figure-html/unnamed-chunk-6-1.png" width="768"></p>
</div>
<div class="section level3">
<h3 id="grouping-data">Grouping Data<a class="anchor" aria-label="anchor" href="#grouping-data"></a>
</h3>
<p>You may want to visualise a third variable by filling the columns
with varying colours. We can do this by adding a <code>group_col</code>
argument.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/plot_epicurve.html">plot_epicurve</a></span><span class="op">(</span></span>
<span>  <span class="va">df_ebola</span>, </span>
<span>  date_col <span class="op">=</span> <span class="va">date_of_onset</span>, </span>
<span>  group_col <span class="op">=</span> <span class="va">outcome</span>,</span>
<span>  floor_date_week <span class="op">=</span> <span class="cn">TRUE</span>,  </span>
<span>  label_weeks <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  date_breaks <span class="op">=</span> <span class="st">"2 weeks"</span>,</span>
<span>  sec_date_axis <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  date_lab <span class="op">=</span> <span class="st">"Week of onset"</span>, </span>
<span>  y_lab <span class="op">=</span> <span class="st">"Incidence"</span>,</span>
<span>  group_lab <span class="op">=</span> <span class="st">"Outcome"</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p><img src="epicurves_files/figure-html/unnamed-chunk-7-1.png" width="768"></p>
<p>By default, <code>NA</code>s will be plotted with a grey colour. You
can change this with the <code>group_na_colour</code> argument.
Alternatively, you may want to recode <code>NA</code>s in your data to a
more meaningful label. Because the <code>outcome</code> column in this
dataset is a factor, we can recode <code>NA</code>s with
<code><a href="https://forcats.tidyverse.org/reference/fct_explicit_na.html" class="external-link">forcats::fct_explicit_na</a></code>.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">df_ebola</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>outcome <span class="op">=</span> <span class="fu">forcats</span><span class="fu">::</span><span class="fu"><a href="https://forcats.tidyverse.org/reference/fct_explicit_na.html" class="external-link">fct_explicit_na</a></span><span class="op">(</span><span class="va">outcome</span>, <span class="st">"Unknown"</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="../reference/plot_epicurve.html">plot_epicurve</a></span><span class="op">(</span></span>
<span>    date_col <span class="op">=</span> <span class="va">date_of_onset</span>, </span>
<span>    group_col <span class="op">=</span> <span class="va">outcome</span>,</span>
<span>    floor_date_week <span class="op">=</span> <span class="cn">TRUE</span>,  </span>
<span>    label_weeks <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>    sec_date_axis <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>    date_lab <span class="op">=</span> <span class="st">"Week of onset"</span>, </span>
<span>    y_lab <span class="op">=</span> <span class="st">"Incidence"</span>,</span>
<span>    group_lab <span class="op">=</span> <span class="st">"Outcome"</span></span>
<span>  <span class="op">)</span></span></code></pre></div>
<p><img src="epicurves_files/figure-html/unnamed-chunk-8-1.png" width="768"></p>
<p>Note: here we ‘pipe’ the modified dataset into the first argument of
the <code>plot_epicurve</code> function.</p>
</div>
<div class="section level3">
<h3 id="adding-proportion-lines">Adding proportion lines<a class="anchor" aria-label="anchor" href="#adding-proportion-lines"></a>
</h3>
<p>It can be useful to visualise a proportion or ratio over time on top
of the epicurve, case fatality ratio being a good example. This can be
done with <code>plot_epicurve</code> by providing a proportion column
along with the numerator and denominator values. To plot the CFR here we
would use the <code>outcome</code> column with a numerator of
<code>"Death"</code> and a denominator of
<code>c("Death", "Recover")</code> (ignoring unknown outcomes in the
calculation):</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">df_ebola</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>outcome <span class="op">=</span> <span class="fu">forcats</span><span class="fu">::</span><span class="fu"><a href="https://forcats.tidyverse.org/reference/fct_explicit_na.html" class="external-link">fct_explicit_na</a></span><span class="op">(</span><span class="va">outcome</span>, <span class="st">"Unknown"</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="../reference/plot_epicurve.html">plot_epicurve</a></span><span class="op">(</span></span>
<span>    date_col <span class="op">=</span> <span class="va">date_of_onset</span>, </span>
<span>    group_col <span class="op">=</span> <span class="va">outcome</span>,</span>
<span>    prop_col <span class="op">=</span> <span class="va">outcome</span>,</span>
<span>    prop_numer <span class="op">=</span> <span class="st">"Death"</span>,</span>
<span>    prop_denom <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Death"</span>, <span class="st">"Recover"</span><span class="op">)</span>,</span>
<span>    floor_date_week <span class="op">=</span> <span class="cn">TRUE</span>,  </span>
<span>    label_weeks <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>    sec_date_axis <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>    date_lab <span class="op">=</span> <span class="st">"Week of onset"</span>, </span>
<span>    y_lab <span class="op">=</span> <span class="st">"Incidence"</span>,</span>
<span>    group_lab <span class="op">=</span> <span class="st">"Outcome"</span>,</span>
<span>    prop_lab <span class="op">=</span> <span class="st">"CFR"</span></span>
<span>  <span class="op">)</span></span></code></pre></div>
<p><img src="epicurves_files/figure-html/unnamed-chunk-9-1.png" width="768"></p>
<p>See also: <code>prop_line_colour</code> and
<code>prop_line_size</code> argument to modify the colour and line
thickness, respectively.</p>
</div>
<div class="section level3">
<h3 id="faceting">Faceting<a class="anchor" aria-label="anchor" href="#faceting"></a>
</h3>
<p>Facets can be used to split the epicurves by a categorical variable,
often a location. In this case we can facet by <code>hospital</code>
simply by adding a <code>facet_col = hospital</code> argument. We also
set the facet columns to 2 and reduce the CFR line width due to smaller
plot sizes:</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">df_ebola</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>outcome <span class="op">=</span> <span class="fu">forcats</span><span class="fu">::</span><span class="fu"><a href="https://forcats.tidyverse.org/reference/fct_explicit_na.html" class="external-link">fct_explicit_na</a></span><span class="op">(</span><span class="va">outcome</span>, <span class="st">"Unknown"</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="../reference/plot_epicurve.html">plot_epicurve</a></span><span class="op">(</span></span>
<span>    date_col <span class="op">=</span> <span class="va">date_of_onset</span>, </span>
<span>    group_col <span class="op">=</span> <span class="va">outcome</span>,</span>
<span>    facet_col <span class="op">=</span> <span class="va">hospital</span>,</span>
<span>    facet_ncol <span class="op">=</span> <span class="fl">2</span>,</span>
<span>    facet_labs <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labellers.html" class="external-link">label_wrap_gen</a></span><span class="op">(</span>width <span class="op">=</span> <span class="fl">30</span><span class="op">)</span>,</span>
<span>    prop_col <span class="op">=</span> <span class="va">outcome</span>,</span>
<span>    prop_numer <span class="op">=</span> <span class="st">"Death"</span>,</span>
<span>    prop_denom <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Death"</span>, <span class="st">"Recover"</span><span class="op">)</span>,</span>
<span>    prop_line_size <span class="op">=</span> <span class="fl">.5</span>,</span>
<span>    floor_date_week <span class="op">=</span> <span class="cn">TRUE</span>,  </span>
<span>    label_weeks <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>    date_breaks <span class="op">=</span> <span class="st">"4 weeks"</span>,</span>
<span>    sec_date_axis <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>    date_lab <span class="op">=</span> <span class="st">"Week of onset"</span>, </span>
<span>    y_lab <span class="op">=</span> <span class="st">"Incidence"</span>,</span>
<span>    group_lab <span class="op">=</span> <span class="st">"Outcome"</span>,</span>
<span>    prop_lab <span class="op">=</span> <span class="st">"CFR"</span></span>
<span>  <span class="op">)</span></span></code></pre></div>
<p><img src="epicurves_files/figure-html/unnamed-chunk-10-1.png" width="768"></p>
</div>
<div class="section level3">
<h3 id="theming">Theming<a class="anchor" aria-label="anchor" href="#theming"></a>
</h3>
<p>Although <code>plot_epicurve</code> has built-in theme defaults,
because the function returns a ggplot object, you can easily reset any
default by adding your own themes, palettes etc to the object:</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">hrbrthemes</span><span class="op">)</span> <span class="co"># install.packages("hrbrthemes") for additional ggplot2 themes</span></span>
<span></span>
<span><span class="va">df_ebola</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>outcome <span class="op">=</span> <span class="fu">forcats</span><span class="fu">::</span><span class="fu"><a href="https://forcats.tidyverse.org/reference/fct_explicit_na.html" class="external-link">fct_explicit_na</a></span><span class="op">(</span><span class="va">outcome</span>, <span class="st">"Unknown"</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="../reference/plot_epicurve.html">plot_epicurve</a></span><span class="op">(</span></span>
<span>    date_col <span class="op">=</span> <span class="va">date_of_onset</span>, </span>
<span>    group_col <span class="op">=</span> <span class="va">outcome</span>,</span>
<span>    prop_col <span class="op">=</span> <span class="va">outcome</span>,</span>
<span>    prop_numer <span class="op">=</span> <span class="st">"Death"</span>,</span>
<span>    prop_denom <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Death"</span>, <span class="st">"Recover"</span><span class="op">)</span>,</span>
<span>    prop_line_colour <span class="op">=</span> <span class="st">"orange"</span>,</span>
<span>    prop_line_size <span class="op">=</span> <span class="fl">0.5</span>,</span>
<span>    floor_date_week <span class="op">=</span> <span class="cn">TRUE</span>, </span>
<span>    label_weeks <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>    sec_date_axis <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>    date_lab <span class="op">=</span> <span class="st">"Week of onset"</span>, </span>
<span>    y_lab <span class="op">=</span> <span class="st">"Incidence"</span>,</span>
<span>    group_lab <span class="op">=</span> <span class="st">"Outcome"</span>,</span>
<span>    prop_lab <span class="op">=</span> <span class="st">"CFR"</span></span>
<span>  <span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_manual.html" class="external-link">scale_fill_manual</a></span><span class="op">(</span>values <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"#486090FF"</span>, <span class="st">"#6078A8FF"</span>, <span class="st">"#7890A8FF"</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu">hrbrthemes</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/hrbrthemes/man/theme_ipsum_rc.html" class="external-link">theme_ft_rc</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html" class="external-link">theme</a></span><span class="op">(</span></span>
<span>    panel.grid.major.x <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">element_blank</a></span><span class="op">(</span><span class="op">)</span>, </span>
<span>    panel.grid.minor.x <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">element_blank</a></span><span class="op">(</span><span class="op">)</span>, </span>
<span>    axis.title.y <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">element_text</a></span><span class="op">(</span>hjust <span class="op">=</span> <span class="fl">.5</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span></code></pre></div>
<p><img src="epicurves_files/figure-html/unnamed-chunk-11-1.png" width="768"></p>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by <a href="https://github.com/paulc91" class="external-link">Paul Campbell</a>, <a href="https://github.com/hugzsoubrier" class="external-link">Hugo Soubrier</a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.9.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
