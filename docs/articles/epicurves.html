<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Epidemic Curves • epivis</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/paper/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/all.min.css" integrity="sha256-nAmazAk6vS34Xqo0BSrTb+abbtFlgsFK7NKSi6o7Y78=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/v4-shims.min.css" integrity="sha256-6qHlizsOWFskGlwVOKuns+D1nB6ssZrHQrNj1wGplHc=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/headroom.min.js" integrity="sha256-DJFC1kqIhelURkuza0AvYal5RxMtpzLjFhsnVIeuk+U=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Epidemic Curves">
<meta property="og:description" content="">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">epivis</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.0.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/epicurves.html">Epidemic Curves</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/epicentre-msf/epivis">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="epicurves_files/accessible-code-block-0.0.1/empty-anchor.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>Epidemic Curves</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/epicentre-msf/epivis/blob/master/vignettes/epicurves.Rmd"><code>vignettes/epicurves.Rmd</code></a></small>
      <div class="hidden name"><code>epicurves.Rmd</code></div>

    </div>

    
    
<p>The <code>plot_epicurve</code> function can be used for plotting incidence over time, commonly referred to as an epidemic curve or epicurve. It is designed to work with un-aggregated data, i.e. patient level linelist data.</p>
<p>We’ll use a simulated ebola outbreak dataset from the <a href="http://www.repidemicsconsortium.org/outbreaks/"><code>{outbreaks}</code></a> package for our examples.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1"></a><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(dplyr)</span>
<span id="cb1-2"><a href="#cb1-2"></a><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(ggplot2)</span>
<span id="cb1-3"><a href="#cb1-3"></a><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(epivis)</span>
<span id="cb1-4"><a href="#cb1-4"></a><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(outbreaks) </span>
<span id="cb1-5"><a href="#cb1-5"></a></span>
<span id="cb1-6"><a href="#cb1-6"></a><span class="co"># set a ggplot2 theme of your preference</span></span>
<span id="cb1-7"><a href="#cb1-7"></a><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/theme_get.html">theme_set</a></span>(<span class="kw"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html">theme_light</a></span>(<span class="dt">base_size =</span> <span class="dv">12</span>))</span></code></pre></div>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1"></a>df_ebola &lt;-<span class="st"> </span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/reexports.html">as_tibble</a></span>(outbreaks<span class="op">::</span>ebola_sim_clean<span class="op">$</span>linelist)</span>
<span id="cb2-2"><a href="#cb2-2"></a></span>
<span id="cb2-3"><a href="#cb2-3"></a><span class="kw"><a href="https://dplyr.tidyverse.org/reference/reexports.html">glimpse</a></span>(df_ebola)</span>
<span id="cb2-4"><a href="#cb2-4"></a><span class="co">#&gt; Rows: 5,829</span></span>
<span id="cb2-5"><a href="#cb2-5"></a><span class="co">#&gt; Columns: 11</span></span>
<span id="cb2-6"><a href="#cb2-6"></a><span class="co">#&gt; $ case_id                 &lt;chr&gt; "d1fafd", "53371b", "f5c3d8", "6c286a", "0f58…</span></span>
<span id="cb2-7"><a href="#cb2-7"></a><span class="co">#&gt; $ generation              &lt;int&gt; 0, 1, 1, 2, 2, 0, 3, 3, 2, 3, 4, 3, 4, 2, 4, …</span></span>
<span id="cb2-8"><a href="#cb2-8"></a><span class="co">#&gt; $ date_of_infection       &lt;date&gt; NA, 2014-04-09, 2014-04-18, NA, 2014-04-22, …</span></span>
<span id="cb2-9"><a href="#cb2-9"></a><span class="co">#&gt; $ date_of_onset           &lt;date&gt; 2014-04-07, 2014-04-15, 2014-04-21, 2014-04-…</span></span>
<span id="cb2-10"><a href="#cb2-10"></a><span class="co">#&gt; $ date_of_hospitalisation &lt;date&gt; 2014-04-17, 2014-04-20, 2014-04-25, 2014-04-…</span></span>
<span id="cb2-11"><a href="#cb2-11"></a><span class="co">#&gt; $ date_of_outcome         &lt;date&gt; 2014-04-19, NA, 2014-04-30, 2014-05-07, 2014…</span></span>
<span id="cb2-12"><a href="#cb2-12"></a><span class="co">#&gt; $ outcome                 &lt;fct&gt; NA, NA, Recover, Death, Recover, NA, Recover,…</span></span>
<span id="cb2-13"><a href="#cb2-13"></a><span class="co">#&gt; $ gender                  &lt;fct&gt; f, m, f, f, f, f, f, f, m, m, f, f, f, f, f, …</span></span>
<span id="cb2-14"><a href="#cb2-14"></a><span class="co">#&gt; $ hospital                &lt;fct&gt; Military Hospital, Connaught Hospital, other,…</span></span>
<span id="cb2-15"><a href="#cb2-15"></a><span class="co">#&gt; $ lon                     &lt;dbl&gt; -13.21799, -13.21491, -13.22804, -13.23112, -…</span></span>
<span id="cb2-16"><a href="#cb2-16"></a><span class="co">#&gt; $ lat                     &lt;dbl&gt; 8.473514, 8.464927, 8.483356, 8.464776, 8.452…</span></span></code></pre></div>
<p>You can plot a simple curve by providing the dataset and the bare column name containing the dates you want to plot:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1"></a><span class="kw"><a href="../reference/plot_epicurve.html">plot_epicurve</a></span>(</span>
<span id="cb3-2"><a href="#cb3-2"></a>  df_ebola, </span>
<span id="cb3-3"><a href="#cb3-3"></a>  <span class="dt">date_col =</span> date_of_onset</span>
<span id="cb3-4"><a href="#cb3-4"></a>)</span></code></pre></div>
<p><img src="epicurves_files/figure-html/unnamed-chunk-2-1.png" width="768"></p>
<p>A note of default date labels: commonly epidemic curves are plotted by week, not day. As such, default date labels are set as ISO Week (00-53) at an interval of 2 weeks. This default is not appropriate for the daily data we have supplied, but we can fix this with built-in function arguments…</p>
<p>Firstly we can add a <code>floor_date_week = TRUE</code> argument to group all dates to the first monday of the ISO Week they fall in (this is required for ggplot weekly tick marks to align properly with the columns). We also add some more informative axis labels:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1"></a><span class="kw"><a href="../reference/plot_epicurve.html">plot_epicurve</a></span>(</span>
<span id="cb4-2"><a href="#cb4-2"></a>  df_ebola, </span>
<span id="cb4-3"><a href="#cb4-3"></a>  <span class="dt">date_col =</span> date_of_onset, </span>
<span id="cb4-4"><a href="#cb4-4"></a>  <span class="dt">floor_date_week =</span> <span class="ot">TRUE</span>, </span>
<span id="cb4-5"><a href="#cb4-5"></a>  <span class="dt">label_weeks =</span> <span class="ot">TRUE</span>,</span>
<span id="cb4-6"><a href="#cb4-6"></a>  <span class="dt">date_lab =</span> <span class="st">"Week of onset"</span>, </span>
<span id="cb4-7"><a href="#cb4-7"></a>  <span class="dt">y_lab =</span> <span class="st">"Incidence"</span></span>
<span id="cb4-8"><a href="#cb4-8"></a>)</span></code></pre></div>
<p><img src="epicurves_files/figure-html/unnamed-chunk-3-1.png" width="768"></p>
<p>We can change the date break intervals with the <code>date_breaks</code> argument:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1"></a><span class="kw"><a href="../reference/plot_epicurve.html">plot_epicurve</a></span>(</span>
<span id="cb5-2"><a href="#cb5-2"></a>  df_ebola, </span>
<span id="cb5-3"><a href="#cb5-3"></a>  <span class="dt">date_col =</span> date_of_onset, </span>
<span id="cb5-4"><a href="#cb5-4"></a>  <span class="dt">floor_date_week =</span> <span class="ot">TRUE</span>, </span>
<span id="cb5-5"><a href="#cb5-5"></a>  <span class="dt">date_breaks =</span> <span class="st">"3 weeks"</span>, </span>
<span id="cb5-6"><a href="#cb5-6"></a>  <span class="dt">date_lab =</span> <span class="st">"Week of onset"</span>, </span>
<span id="cb5-7"><a href="#cb5-7"></a>  <span class="dt">y_lab =</span> <span class="st">"Incidence"</span></span>
<span id="cb5-8"><a href="#cb5-8"></a>)</span></code></pre></div>
<p><img src="epicurves_files/figure-html/unnamed-chunk-4-1.png" width="768"></p>
<p>If you want to display more week labels but avoid overlapping, you can use the <code>dodge_x_labs</code> helper function:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1"></a><span class="kw"><a href="../reference/plot_epicurve.html">plot_epicurve</a></span>(</span>
<span id="cb6-2"><a href="#cb6-2"></a>  df_ebola, </span>
<span id="cb6-3"><a href="#cb6-3"></a>  <span class="dt">date_col =</span> date_of_onset, </span>
<span id="cb6-4"><a href="#cb6-4"></a>  <span class="dt">floor_date_week =</span> <span class="ot">TRUE</span>,</span>
<span id="cb6-5"><a href="#cb6-5"></a>  <span class="dt">label_weeks =</span> <span class="ot">TRUE</span>,</span>
<span id="cb6-6"><a href="#cb6-6"></a>  <span class="dt">date_breaks =</span> <span class="st">"1 week"</span>, </span>
<span id="cb6-7"><a href="#cb6-7"></a>  <span class="dt">date_lab =</span> <span class="st">"Week of onset"</span>, </span>
<span id="cb6-8"><a href="#cb6-8"></a>  <span class="dt">y_lab =</span> <span class="st">"Incidence"</span></span>
<span id="cb6-9"><a href="#cb6-9"></a>) <span class="op">+</span></span>
<span id="cb6-10"><a href="#cb6-10"></a><span class="st">  </span><span class="kw">dodge_x_labs</span>()</span></code></pre></div>
<p><img src="epicurves_files/figure-html/unnamed-chunk-5-1.png" width="768"></p>
<p>Since week numbers alone don’t give us any information about the year they relate to, it can be useful to add a secondary date axis to display more standard date labels. This can be done with the <code>sec_date_axis = TRUE</code> argument:</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1"></a><span class="kw"><a href="../reference/plot_epicurve.html">plot_epicurve</a></span>(</span>
<span id="cb7-2"><a href="#cb7-2"></a>  df_ebola, </span>
<span id="cb7-3"><a href="#cb7-3"></a>  <span class="dt">date_col =</span> date_of_onset, </span>
<span id="cb7-4"><a href="#cb7-4"></a>  <span class="dt">floor_date_week =</span> <span class="ot">TRUE</span>, </span>
<span id="cb7-5"><a href="#cb7-5"></a>  <span class="dt">label_weeks =</span> <span class="ot">TRUE</span>,</span>
<span id="cb7-6"><a href="#cb7-6"></a>  <span class="dt">sec_date_axis =</span> <span class="ot">TRUE</span>,</span>
<span id="cb7-7"><a href="#cb7-7"></a>  <span class="dt">date_lab =</span> <span class="st">"Week of onset"</span>, </span>
<span id="cb7-8"><a href="#cb7-8"></a>  <span class="dt">y_lab =</span> <span class="st">"Incidence"</span></span>
<span id="cb7-9"><a href="#cb7-9"></a>)</span></code></pre></div>
<p><img src="epicurves_files/figure-html/unnamed-chunk-6-1.png" width="768"></p>
<div id="grouping-data" class="section level3">
<h3 class="hasAnchor">
<a href="#grouping-data" class="anchor"></a>Grouping Data</h3>
<p>You may want to visualise a third variable by filling the columns with varying colours. We can do this by adding a <code>group_col</code> argument.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1"></a><span class="kw"><a href="../reference/plot_epicurve.html">plot_epicurve</a></span>(</span>
<span id="cb8-2"><a href="#cb8-2"></a>  df_ebola, </span>
<span id="cb8-3"><a href="#cb8-3"></a>  <span class="dt">date_col =</span> date_of_onset, </span>
<span id="cb8-4"><a href="#cb8-4"></a>  <span class="dt">group_col =</span> outcome,</span>
<span id="cb8-5"><a href="#cb8-5"></a>  <span class="dt">floor_date_week =</span> <span class="ot">TRUE</span>,  </span>
<span id="cb8-6"><a href="#cb8-6"></a>  <span class="dt">label_weeks =</span> <span class="ot">TRUE</span>,</span>
<span id="cb8-7"><a href="#cb8-7"></a>  <span class="dt">sec_date_axis =</span> <span class="ot">TRUE</span>,</span>
<span id="cb8-8"><a href="#cb8-8"></a>  <span class="dt">date_lab =</span> <span class="st">"Week of onset"</span>, </span>
<span id="cb8-9"><a href="#cb8-9"></a>  <span class="dt">y_lab =</span> <span class="st">"Incidence"</span>,</span>
<span id="cb8-10"><a href="#cb8-10"></a>  <span class="dt">group_lab =</span> <span class="st">"Outcome"</span></span>
<span id="cb8-11"><a href="#cb8-11"></a>)</span></code></pre></div>
<p><img src="epicurves_files/figure-html/unnamed-chunk-7-1.png" width="768"></p>
<p>By default, <code>NA</code>s will be plotted with a grey colour. You can change this with the <code>group_na_colour</code> argument. Alternatively, you may want to recode <code>NA</code>s in your data to a more meaningful label. Because the <code>outcome</code> column in this dataset is a factor, we can recode <code>NA</code>s with <code><a href="https://forcats.tidyverse.org/reference/fct_explicit_na.html">forcats::fct_explicit_na</a></code>.</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1"></a>df_ebola <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb9-2"><a href="#cb9-2"></a><span class="st">  </span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span>(<span class="dt">outcome =</span> forcats<span class="op">::</span><span class="kw"><a href="https://forcats.tidyverse.org/reference/fct_explicit_na.html">fct_explicit_na</a></span>(outcome, <span class="st">"Unknown"</span>)) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb9-3"><a href="#cb9-3"></a><span class="st">  </span><span class="kw"><a href="../reference/plot_epicurve.html">plot_epicurve</a></span>(</span>
<span id="cb9-4"><a href="#cb9-4"></a>    <span class="dt">date_col =</span> date_of_onset, </span>
<span id="cb9-5"><a href="#cb9-5"></a>    <span class="dt">group_col =</span> outcome,</span>
<span id="cb9-6"><a href="#cb9-6"></a>    <span class="dt">floor_date_week =</span> <span class="ot">TRUE</span>,  </span>
<span id="cb9-7"><a href="#cb9-7"></a>    <span class="dt">label_weeks =</span> <span class="ot">TRUE</span>,</span>
<span id="cb9-8"><a href="#cb9-8"></a>    <span class="dt">sec_date_axis =</span> <span class="ot">TRUE</span>,</span>
<span id="cb9-9"><a href="#cb9-9"></a>    <span class="dt">date_lab =</span> <span class="st">"Week of onset"</span>, </span>
<span id="cb9-10"><a href="#cb9-10"></a>    <span class="dt">y_lab =</span> <span class="st">"Incidence"</span>,</span>
<span id="cb9-11"><a href="#cb9-11"></a>    <span class="dt">group_lab =</span> <span class="st">"Outcome"</span></span>
<span id="cb9-12"><a href="#cb9-12"></a>  )</span></code></pre></div>
<p><img src="epicurves_files/figure-html/unnamed-chunk-8-1.png" width="768"></p>
<p>Note: here we ‘pipe’ the modified dataset into the first argument of the <code>plot_epicurve</code> function.</p>
</div>
<div id="adding-proportion-lines" class="section level3">
<h3 class="hasAnchor">
<a href="#adding-proportion-lines" class="anchor"></a>Adding proportion lines</h3>
<p>It can be useful to visualise a proportion or ratio over time on top of the epicurve, case fatality ratio being a good example. This can be done with <code>plot_epicurve</code> by providing a proportion column along with the numerator and denominator values. To plot the CFR here we would use the <code>outcome</code> column with a numerator of <code>"Death"</code> and a denominator of <code><a href="https://rdrr.io/r/base/c.html">c("Death", "Recover")</a></code> (ignoring unknown outcomes in the calculation):</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1"></a>df_ebola <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb10-2"><a href="#cb10-2"></a><span class="st">  </span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span>(<span class="dt">outcome =</span> forcats<span class="op">::</span><span class="kw"><a href="https://forcats.tidyverse.org/reference/fct_explicit_na.html">fct_explicit_na</a></span>(outcome, <span class="st">"Unknown"</span>)) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb10-3"><a href="#cb10-3"></a><span class="st">  </span><span class="kw"><a href="../reference/plot_epicurve.html">plot_epicurve</a></span>(</span>
<span id="cb10-4"><a href="#cb10-4"></a>    <span class="dt">date_col =</span> date_of_onset, </span>
<span id="cb10-5"><a href="#cb10-5"></a>    <span class="dt">group_col =</span> outcome,</span>
<span id="cb10-6"><a href="#cb10-6"></a>    <span class="dt">prop_col =</span> outcome,</span>
<span id="cb10-7"><a href="#cb10-7"></a>    <span class="dt">prop_numer =</span> <span class="st">"Death"</span>,</span>
<span id="cb10-8"><a href="#cb10-8"></a>    <span class="dt">prop_denom =</span> <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"Death"</span>, <span class="st">"Recover"</span>),</span>
<span id="cb10-9"><a href="#cb10-9"></a>    <span class="dt">floor_date_week =</span> <span class="ot">TRUE</span>,  </span>
<span id="cb10-10"><a href="#cb10-10"></a>    <span class="dt">label_weeks =</span> <span class="ot">TRUE</span>,</span>
<span id="cb10-11"><a href="#cb10-11"></a>    <span class="dt">sec_date_axis =</span> <span class="ot">TRUE</span>,</span>
<span id="cb10-12"><a href="#cb10-12"></a>    <span class="dt">date_lab =</span> <span class="st">"Week of onset"</span>, </span>
<span id="cb10-13"><a href="#cb10-13"></a>    <span class="dt">y_lab =</span> <span class="st">"Incidence"</span>,</span>
<span id="cb10-14"><a href="#cb10-14"></a>    <span class="dt">group_lab =</span> <span class="st">"Outcome"</span>,</span>
<span id="cb10-15"><a href="#cb10-15"></a>    <span class="dt">prop_lab =</span> <span class="st">"CFR"</span></span>
<span id="cb10-16"><a href="#cb10-16"></a>  )</span></code></pre></div>
<p><img src="epicurves_files/figure-html/unnamed-chunk-9-1.png" width="768"></p>
<p>See also: <code>prop_line_colour</code> and <code>prop_line_size</code> argument to modify the colour and line thickness, respectively.</p>
</div>
<div id="faceting" class="section level3">
<h3 class="hasAnchor">
<a href="#faceting" class="anchor"></a>Faceting</h3>
<p>Facets can be used to split the epicurves by a categorical variable, often a location. In this case we can facet by <code>hospital</code> simply by adding a <code>facet_col = hospital</code> argument. We also set the facet columns to 2 and reduce the CFR line width due to smaller plot sizes:</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1"></a>df_ebola <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb11-2"><a href="#cb11-2"></a><span class="st">  </span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span>(<span class="dt">outcome =</span> forcats<span class="op">::</span><span class="kw"><a href="https://forcats.tidyverse.org/reference/fct_explicit_na.html">fct_explicit_na</a></span>(outcome, <span class="st">"Unknown"</span>)) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb11-3"><a href="#cb11-3"></a><span class="st">  </span><span class="kw"><a href="../reference/plot_epicurve.html">plot_epicurve</a></span>(</span>
<span id="cb11-4"><a href="#cb11-4"></a>    <span class="dt">date_col =</span> date_of_onset, </span>
<span id="cb11-5"><a href="#cb11-5"></a>    <span class="dt">group_col =</span> outcome,</span>
<span id="cb11-6"><a href="#cb11-6"></a>    <span class="dt">facet_col =</span> hospital,</span>
<span id="cb11-7"><a href="#cb11-7"></a>    <span class="dt">facet_ncol =</span> <span class="dv">2</span>,</span>
<span id="cb11-8"><a href="#cb11-8"></a>    <span class="dt">facet_labs =</span> <span class="kw"><a href="https://ggplot2.tidyverse.org/reference/labellers.html">label_wrap_gen</a></span>(<span class="dt">width =</span> <span class="dv">30</span>),</span>
<span id="cb11-9"><a href="#cb11-9"></a>    <span class="dt">prop_col =</span> outcome,</span>
<span id="cb11-10"><a href="#cb11-10"></a>    <span class="dt">prop_numer =</span> <span class="st">"Death"</span>,</span>
<span id="cb11-11"><a href="#cb11-11"></a>    <span class="dt">prop_denom =</span> <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"Death"</span>, <span class="st">"Recover"</span>),</span>
<span id="cb11-12"><a href="#cb11-12"></a>    <span class="dt">prop_line_size =</span> <span class="fl">.5</span>,</span>
<span id="cb11-13"><a href="#cb11-13"></a>    <span class="dt">floor_date_week =</span> <span class="ot">TRUE</span>,  </span>
<span id="cb11-14"><a href="#cb11-14"></a>    <span class="dt">label_weeks =</span> <span class="ot">TRUE</span>,</span>
<span id="cb11-15"><a href="#cb11-15"></a>    <span class="dt">date_breaks =</span> <span class="st">"4 weeks"</span>, </span>
<span id="cb11-16"><a href="#cb11-16"></a>    <span class="dt">sec_date_axis =</span> <span class="ot">TRUE</span>,</span>
<span id="cb11-17"><a href="#cb11-17"></a>    <span class="dt">date_lab =</span> <span class="st">"Week of onset"</span>, </span>
<span id="cb11-18"><a href="#cb11-18"></a>    <span class="dt">y_lab =</span> <span class="st">"Incidence"</span>,</span>
<span id="cb11-19"><a href="#cb11-19"></a>    <span class="dt">group_lab =</span> <span class="st">"Outcome"</span>,</span>
<span id="cb11-20"><a href="#cb11-20"></a>    <span class="dt">prop_lab =</span> <span class="st">"CFR"</span></span>
<span id="cb11-21"><a href="#cb11-21"></a>  )</span></code></pre></div>
<p><img src="epicurves_files/figure-html/unnamed-chunk-10-1.png" width="768"></p>
</div>
<div id="theming" class="section level3">
<h3 class="hasAnchor">
<a href="#theming" class="anchor"></a>Theming</h3>
<p>Although <code>plot_epicurve</code> has built-in theme defaults, because the function returns a ggplot object, you can easily reset any default by adding your own themes, palettes etc to the object:</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1"></a><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(hrbrthemes) <span class="co"># install.packages("hrbrthemes") for additional ggplot2 themes</span></span>
<span id="cb12-2"><a href="#cb12-2"></a><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(paletteer) <span class="co"># install.packages("paletteer") access colour palettes from several different packages</span></span>
<span id="cb12-3"><a href="#cb12-3"></a></span>
<span id="cb12-4"><a href="#cb12-4"></a>df_ebola <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb12-5"><a href="#cb12-5"></a><span class="st">  </span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span>(<span class="dt">outcome =</span> forcats<span class="op">::</span><span class="kw"><a href="https://forcats.tidyverse.org/reference/fct_explicit_na.html">fct_explicit_na</a></span>(outcome, <span class="st">"Unknown"</span>)) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb12-6"><a href="#cb12-6"></a><span class="st">  </span><span class="kw"><a href="../reference/plot_epicurve.html">plot_epicurve</a></span>(</span>
<span id="cb12-7"><a href="#cb12-7"></a>    <span class="dt">date_col =</span> date_of_onset, </span>
<span id="cb12-8"><a href="#cb12-8"></a>    <span class="dt">group_col =</span> outcome,</span>
<span id="cb12-9"><a href="#cb12-9"></a>    <span class="dt">prop_col =</span> outcome,</span>
<span id="cb12-10"><a href="#cb12-10"></a>    <span class="dt">prop_numer =</span> <span class="st">"Death"</span>,</span>
<span id="cb12-11"><a href="#cb12-11"></a>    <span class="dt">prop_denom =</span> <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"Death"</span>, <span class="st">"Recover"</span>),</span>
<span id="cb12-12"><a href="#cb12-12"></a>    <span class="dt">prop_line_colour =</span> <span class="st">"orange"</span>,</span>
<span id="cb12-13"><a href="#cb12-13"></a>    <span class="dt">prop_line_size =</span> <span class="fl">0.5</span>,</span>
<span id="cb12-14"><a href="#cb12-14"></a>    <span class="dt">floor_date_week =</span> <span class="ot">TRUE</span>, </span>
<span id="cb12-15"><a href="#cb12-15"></a>    <span class="dt">label_weeks =</span> <span class="ot">TRUE</span>,</span>
<span id="cb12-16"><a href="#cb12-16"></a>    <span class="dt">date_breaks =</span> <span class="st">"3 weeks"</span>, </span>
<span id="cb12-17"><a href="#cb12-17"></a>    <span class="dt">sec_date_axis =</span> <span class="ot">TRUE</span>,</span>
<span id="cb12-18"><a href="#cb12-18"></a>    <span class="dt">date_lab =</span> <span class="st">"Week of onset"</span>, </span>
<span id="cb12-19"><a href="#cb12-19"></a>    <span class="dt">y_lab =</span> <span class="st">"Incidence"</span>,</span>
<span id="cb12-20"><a href="#cb12-20"></a>    <span class="dt">group_lab =</span> <span class="st">"Outcome"</span>,</span>
<span id="cb12-21"><a href="#cb12-21"></a>    <span class="dt">prop_lab =</span> <span class="st">"CFR"</span></span>
<span id="cb12-22"><a href="#cb12-22"></a>  ) <span class="op">+</span></span>
<span id="cb12-23"><a href="#cb12-23"></a><span class="st">  </span>paletteer<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/paletteer/man/ggplot2-scales-discrete.html">scale_fill_paletteer_d</a></span>(<span class="dt">palette =</span> <span class="st">"nord::afternoon_prarie"</span>) <span class="op">+</span></span>
<span id="cb12-24"><a href="#cb12-24"></a><span class="st">  </span>hrbrthemes<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/hrbrthemes/man/theme_ipsum_rc.html">theme_ft_rc</a></span>() <span class="op">+</span><span class="st"> </span><span class="co"># requires Roboto Condensed font to be installed on your system</span></span>
<span id="cb12-25"><a href="#cb12-25"></a><span class="st">  </span><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/theme.html">theme</a></span>(</span>
<span id="cb12-26"><a href="#cb12-26"></a>    <span class="dt">panel.grid.major.x =</span> <span class="kw"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_blank</a></span>(), </span>
<span id="cb12-27"><a href="#cb12-27"></a>    <span class="dt">panel.grid.minor.x =</span> <span class="kw"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_blank</a></span>(), </span>
<span id="cb12-28"><a href="#cb12-28"></a>    <span class="dt">axis.title.y =</span> <span class="kw"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_text</a></span>(<span class="dt">hjust =</span> <span class="fl">.5</span>)</span>
<span id="cb12-29"><a href="#cb12-29"></a>  )</span></code></pre></div>
<p><img src="epicurves_files/figure-html/unnamed-chunk-11-1.png" width="768"></p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">

      </div>

</div>



      <footer><div class="copyright">
  <p>Developed by <a href="https://github.com/paulc91">Paul Campbell</a>.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.4.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
